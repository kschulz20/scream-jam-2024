[gd_scene load_steps=6 format=3 uid="uid://owpaq245hh2l"]

[ext_resource type="Script" path="res://src/main.gd" id="1_sla8m"]
[ext_resource type="PackedScene" uid="uid://q772sl7sx1ey" path="res://src/Entities/Player/player_character.tscn" id="1_wblpv"]
[ext_resource type="Script" path="res://src/UI/game_ui.gd" id="4_7n45i"]
[ext_resource type="Script" path="res://src/spawn_manager.gd" id="4_k52d0"]
[ext_resource type="Script" path="res://src/UI/hud.gd" id="5_51ljx"]

[node name="Main" type="Node"]
script = ExtResource("1_sla8m")

[node name="PlayerCharacter" parent="." instance=ExtResource("1_wblpv")]
unique_name_in_owner = true
move_speed = 20000.0

[node name="Enemies" type="Node" parent="."]

[node name="SpawnManager" type="Node" parent="."]
script = ExtResource("4_k52d0")

[node name="EnemySpawn1" type="Marker2D" parent="SpawnManager"]

[node name="EnemySpawn2" type="Marker2D" parent="SpawnManager"]
position = Vector2(1153, 3)

[node name="EnemySpawnTimer" type="Timer" parent="SpawnManager"]
wait_time = 10.0

[node name="UI" type="CanvasLayer" parent="."]
process_mode = 3
script = ExtResource("4_7n45i")

[node name="PauseMenu" type="MarginContainer" parent="UI"]
visible = false
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme_override_constants/margin_top = 60
theme_override_constants/margin_bottom = 60

[node name="VBoxContainer" type="VBoxContainer" parent="UI/PauseMenu"]
layout_mode = 2

[node name="Title" type="Label" parent="UI/PauseMenu/VBoxContainer"]
layout_mode = 2
theme_override_font_sizes/font_size = 72
text = "PAUSED"
horizontal_alignment = 1

[node name="MenuOptions" type="VBoxContainer" parent="UI/PauseMenu/VBoxContainer"]
layout_mode = 2
size_flags_vertical = 3
alignment = 1

[node name="Continue" type="Button" parent="UI/PauseMenu/VBoxContainer/MenuOptions"]
layout_mode = 2
size_flags_horizontal = 4
focus_neighbor_bottom = NodePath("../Restart")
theme_override_font_sizes/font_size = 36
text = "Continue"
flat = true

[node name="Restart" type="Button" parent="UI/PauseMenu/VBoxContainer/MenuOptions"]
layout_mode = 2
size_flags_horizontal = 4
focus_neighbor_top = NodePath("../Continue")
focus_neighbor_bottom = NodePath("../Main Menu")
theme_override_font_sizes/font_size = 36
text = "Restart"
flat = true

[node name="Main Menu" type="Button" parent="UI/PauseMenu/VBoxContainer/MenuOptions"]
layout_mode = 2
size_flags_horizontal = 4
focus_neighbor_top = NodePath("../Restart")
theme_override_font_sizes/font_size = 36
text = "Main Menu"
flat = true

[node name="DeathMenu" type="MarginContainer" parent="UI"]
visible = false
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme_override_constants/margin_top = 60
theme_override_constants/margin_bottom = 60

[node name="VBoxContainer" type="VBoxContainer" parent="UI/DeathMenu"]
layout_mode = 2

[node name="Title" type="Label" parent="UI/DeathMenu/VBoxContainer"]
layout_mode = 2
theme_override_colors/font_color = Color(1, 0, 0, 1)
theme_override_font_sizes/font_size = 72
text = "YOU DIED"
horizontal_alignment = 1

[node name="MenuOptions" type="VBoxContainer" parent="UI/DeathMenu/VBoxContainer"]
layout_mode = 2
size_flags_vertical = 3
alignment = 1

[node name="Restart" type="Button" parent="UI/DeathMenu/VBoxContainer/MenuOptions"]
layout_mode = 2
size_flags_horizontal = 4
focus_neighbor_bottom = NodePath("../Main Menu")
theme_override_font_sizes/font_size = 36
text = "Restart"
flat = true

[node name="Main Menu" type="Button" parent="UI/DeathMenu/VBoxContainer/MenuOptions"]
layout_mode = 2
size_flags_horizontal = 4
focus_neighbor_top = NodePath("../Restart")
theme_override_font_sizes/font_size = 36
text = "Main Menu"
flat = true

[node name="HUD" type="MarginContainer" parent="UI"]
offset_right = 40.0
offset_bottom = 40.0
script = ExtResource("5_51ljx")

[node name="Health" type="Label" parent="UI/HUD"]
layout_mode = 2

[connection signal="death" from="PlayerCharacter" to="UI" method="_on_player_character_death"]
[connection signal="timeout" from="SpawnManager/EnemySpawnTimer" to="SpawnManager" method="_on_enemy_spawn_timer_timeout"]
[connection signal="pressed" from="UI/PauseMenu/VBoxContainer/MenuOptions/Continue" to="UI" method="_on_continue_pressed"]
[connection signal="pressed" from="UI/PauseMenu/VBoxContainer/MenuOptions/Restart" to="UI" method="_on_restart_pressed"]
[connection signal="pressed" from="UI/PauseMenu/VBoxContainer/MenuOptions/Main Menu" to="UI" method="_on_main_menu_pressed"]
[connection signal="pressed" from="UI/DeathMenu/VBoxContainer/MenuOptions/Restart" to="UI" method="_on_restart_pressed"]
[connection signal="pressed" from="UI/DeathMenu/VBoxContainer/MenuOptions/Main Menu" to="UI" method="_on_main_menu_pressed"]
